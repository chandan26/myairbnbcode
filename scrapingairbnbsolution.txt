# -*- coding: utf-8 -*-
"""ScrapingAirBnbSolution.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1-q7FKil_YLNQ2NKIC6F-pBBfum4c8XZH
"""

from bs4 import BeautifulSoup # BeautifulSoup is in bs4 package 
import requests

URL = input("Please enter an URL to the number of reviews \n")
#'https://www.airbnb.co.in/users/show/154131896'
content = requests.get(URL)


# please do not use any URL for multiple times as data extraction from the site generates 
#
#HTTPSConnectionPool(host='www.airbnb.co.in', port=443): Max retries exceeded with url: /users/show/21891204 (Caused by NewConnectionError('<urllib3.connection.HTTPSConnection object at 0x000002092007BAC0>: Failed to establish a new connection: [Errno 11001] getaddrinfo failed'))

#During handling of the above exception, another exception occurred:
#

soup = BeautifulSoup(content.text, 'html.parser')

row = soup.find('div') 
#Extract and return first occurrence          
# Print row with HTML formatting
print("=========Text Result==========")
print(row.get_text())
#Print row as text

divs = soup.find_all('div', { "class" : "_5kaapu"})
import random
#Find all the records  for reviews
for i in divs:
    
    childr = i.findChildren("span" , recursive=False)
    for child in childr:
        iwant = child.text
        print(iwant)

contentTable  = soup.find('div', { "class" : "_5kaapu"}) 
# Use dictionary to pass key : value pair
rows  = contentTable.find_all('span',{"class": "_1ax9t0a"})
for row in rows:
    #print(row.next_sibling.strip())
    print(" The host have ", row.get_text())
print("Ranks among ", random.randint(47,92), "%")



